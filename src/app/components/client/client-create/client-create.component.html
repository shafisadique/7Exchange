
<div class="container" style="margin: auto;" >


  
    <div class="card card-primary" >
      <div class="d-flex justify-content-center align-items-center"  style="height: 100vh;" *ngIf="isBodyLoading == true">
        <div class="spinner-border" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
      </div>
      <form class="forms-sample" *ngIf="!isBodyLoading" [formGroup]="clientAddForm" (ngSubmit)="onSubmit()">
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6 grid-margin " >
                        <!-- <div class="card"> -->
                            <div class="card-header bg-primary">
                                    <h5>Basic Details</h5>
                            </div>
  
                            <div class="card-body card">
                                <div class="mb-3">
                                    <label class="form-label" style="font-weight: bold;">Code</label>
                                    <input type="text" disabled class="form-control" autocomplete="off"
                                           placeholder="Auto Generated">
                                </div>
  
                                <div class="mb-3">
                                    <label style="font-weight: bold;" class="form-label">Name *</label>
                                    <input type="text" class="form-control"
                                           [ngClass]="clientAddForm.get('name')?.touched && clientAddForm.get('name')?.hasError('required') ? 'is-invalid' : ''"
                                           formControlName="name" autocomplete="off"
                                           placeholder="Name" required />
  
                                    <div *ngIf="clientAddForm.get('name')?.hasError('required') && (clientAddForm.get('name')?.touched || submitted)"
                                         style="color:red">
                                        Name is required.
                                    </div>
                                    <div
                                            *ngIf="clientAddForm.get('name')?.hasError('minlength') && clientAddForm.get('name')?.touched"
                                            style="color:red">
                                        Name must be at least 3 characters.
                                    </div>
                                    <div
                                            *ngIf="clientAddForm.get('name')?.hasError('maxlength') && clientAddForm.get('name')?.touched"
                                            style="color:red">
                                        Name cannot exceed 30 characters.
                                    </div>
                                    <div *ngIf="clientAddForm.get('name')?.hasError('pattern') && clientAddForm.get('name')?.touched"
                                         style="color:red">
                                        Invalid pattern for Name.
                                    </div>
                                </div>
  
                                <div class="mb-3">
                                    <label style="font-weight: bold;" class="form-label">Reference*</label>
                                    <input type="text" class="form-control"
                                    [ngClass]="clientAddForm.get('reference')?.touched && clientAddForm.get('reference')?.hasError('required') ? 'is-invalid' : ''"
                                    formControlName="reference" autocomplete="off" placeholder="Reference" required />
  
                             <div *ngIf="clientAddForm.get('reference')?.hasError('required') && (clientAddForm.get('reference')?.touched || submitted)"
                                  style="color: red">
                               Reference is required.
                             </div>
  
                             <div
                             *ngIf="clientAddForm.get('reference')?.hasError('minlength') && clientAddForm.get('reference')?.touched"
                             style="color:red">
                             Reference must be at least 3 characters.
                     </div>
                                    <div
                                            *ngIf="clientAddForm.get('reference')?.hasError('pattern') && clientAddForm.get('reference')?.touched"
                                            style="color:red">
                                        Invalid pattern for Reference.
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label style="font-weight: bold;" class="form-label">Password *</label>
                                    <div class="input-group mb-3">
                                      <input type="text" class="form-control" readonly
                                      [ngClass]="clientAddForm.get('reference')?.touched && clientAddForm.get('password')?.hasError('required') ? 'is-invalid' : ''"
                                      formControlName="password" autocomplete="off" placeholder="Password" required />
                                        <button class="input-group-text btn-primary" id="basic-addon2"
                                                type="button" style="background-color:#17a2b8 ;color: whitesmoke;" (click)="generatePassword()">Generate Password
                                        </button>
                                    </div>
                                    
                                    <div *ngIf="clientAddForm.get('password')?.hasError('required') && (clientAddForm.get('password')?.touched || submitted)"
                                    style="color: red">
                                    Password is required.
                               </div>
                                    
                                    <div
                                    *ngIf="clientAddForm.get('password')?.hasError('minlength') && clientAddForm.get('password')?.touched"
                                    style="color:red">
                                    Password must be at least 6 characters..
                            </div>
  
                                    <div
                                    *ngIf="clientAddForm.get('password')?.hasError('maxlength') && clientAddForm.get('password')?.touched"
                                    style="color:red">
                                    Password cannot exceed 60 characters.
                            </div>
  
                                </div>
                                <div class="mb-3">
                                    <label style="font-weight: bold;" class="form-label">Contact No</label>
                                    <input type="text" class="form-control"
                                    [ngClass]="clientAddForm.get('contactNo')?.touched && clientAddForm.get('contactNo')?.hasError('required') ? 'is-invalid' : ''"
                                    formControlName="contactNo" autocomplete="off" placeholder="contactNo" required />
  
  
                                    <div *ngIf="clientAddForm.get('contactNo')?.hasError('required') && (clientAddForm.get('password')?.touched || submitted)"
                                    style="color: red">
                                    Contact number is required.
                               </div>
                               <div
                               *ngIf="clientAddForm.get('contactNo')?.hasError('maxlength') && clientAddForm.get('contactNo')?.touched"
                               style="color:red">
                               Contact number cannot exceed 11 digits.
                       </div>
  
                                    <div
                                            *ngIf="clientAddForm.get('contactNo')?.hasError('pattern') && clientAddForm.get('contactNo')?.touched"
                                            style="color: red;">
                                        Only numbers are allowed for the contact number.
                                    </div>
                                </div>
  
  
                            </div>
                        <!-- </div> -->
                    </div>
  
                    <div class="col-md-6 grid-margin stretch-card">
                            <div class="card-header bg-danger">
                                <h5>Share and Commission</h5>
                            </div>
                            <div class="card-body card">
                               
<!--   
                                <div class="row">
                                    <div class="col-sm-6">
                                        <div class="mb-3">
                                            <label style="font-weight: bold;" class="form-label">Current Limit</label>
                                            <input type="number" class="form-control"
                                            [ngClass]="clientAddForm.get('currentLimit')?.touched && clientAddForm.get('currentLimit')?.hasError('required') ? 'is-invalid' : ''"
                                            formControlName="currentLimit" autocomplete="off" placeholder="current Limit" required />
  
                                            <div
                                                    *ngIf="clientAddForm.get('currentLimit')?.hasError('min') && clientAddForm.get('currentLimit')?.touched">
                                                Current limit must be greater than or equal to 0.
                                            </div>
                                            <div
                                                    *ngIf="clientAddForm.get('currentLimit')?.hasError('max') && clientAddForm.get('currentLimit')?.touched" style="color:red">
                                                Current limit must be less than or equal to {{agent?.currentLimit}}.
                                            </div>
                                            <div
                                                    *ngIf="clientAddForm.get('currentLimit')?.hasError('required') && (clientAddForm.get('currentLimit')?.touched|| submitted)"
                                                    style="color:red">
                                                Current limit must be greater than or equal to 0.
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-6">
                                        <label style="font-weight: bold;" class="form-label">My Limit</label>
                                        <input type="number" class="form-control" disabled autocomplete="off" [value]="agent?.currentLimit" >
  
                                    </div>
                                </div> -->
                                <div class="row">
                                    <!-- <div class="col-sm-6">
                                        <div class="mb-3">
                                            <label style="font-weight: bold;" class="form-label">Share</label>
                                            
                                                   <input type="text" class="form-control"
                                                   [ngClass]="clientAddForm.get('share')?.touched  && clientAddForm.get('share')?.hasError('required') ? 'is-invalid' : ''"
                                                   formControlName="share" autocomplete="off" placeholder="Share " required />
  
                                            <div
                                                    *ngIf="clientAddForm.get('share')?.hasError('required') && (clientAddForm.get('share')?.touched||submitted)"
                                                    style="color:red">
                                                Share must be greater than or equal to 0.
                                            </div>
                                            <div
                                                    *ngIf="clientAddForm.get('share')?.hasError('min') && clientAddForm.get('share')?.touched"
                                                    style="color:red">
                                                Share must be greater than or equal to 0.
                                            </div>
                                            <div
                                                    *ngIf="clientAddForm.get('share')?.hasError('max') && clientAddForm.get('share')?.touched"
                                                    style="color:red">
                                                Share must be less than or equal to {{agent?.share}}.
                                            </div>
                                            
                                            <div *ngIf="serverErrors?.share && serverErrors != null" class="server-error" style="color: red;">
                                              {{ serverErrors?.share }}
                                            </div>

  
                                        </div>
                                    </div> -->
                                    <div class="col-12">
                                        <label style="font-weight: bold;" class="form-label">My Share</label>
                                        <input type="number" class="form-control" disabled autocomplete="off"
                                               [value]="agent?.share">
                                    </div>
                                </div>
                                <!-- <div class="row">
                                    <div class="col-sm-6">
                                        <div class="mb-3">
                                            <label style="font-weight: bold;" class="form-label">Casino Share</label>
  
                                                   <input type="text" class="form-control"
                                                   [ngClass]="clientAddForm.get('cshare')?.touched && clientAddForm.get('cshare')?.hasError('required') ? 'is-invalid' : ''"
                                                   formControlName="cshare" autocomplete="off" placeholder="Casino Share " required />
                                            <div
                                                    *ngIf="clientAddForm.get('cshare')?.hasError('required') && (clientAddForm.get('cshare')?.touched ||submitted)"
                                                    style="color:red">
                                                Casino share must be greater than or equal to 0.
                                            </div>
                                            <div
                                                    *ngIf="clientAddForm.get('cShare')?.hasError('max') && clientAddForm.get('cShare')?.touched"
                                                    style="color:red">
                                                Casino share must be less than or equal to {{agent?.cShare}}.
                                            </div>
  
                                            <div *ngIf="serverErrors?.cShare && serverErrors != null" class="server-error" style="color: red;">
                                              {{ serverErrors?.cShare }}
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-6">
                                        <label style="font-weight: bold;" class="form-label"> My Casino Share</label>
                                        <input type="number" class="form-control" disabled autocomplete="off"
                                               [value]="agent?.cshare">
  
                                    </div>
                                </div> -->
                                <!-- <div class="row">
                                    <div class="col-sm-6">
                                        <div class="mb-3">
                                            <label style="font-weight: bold;" class="form-label">International Casino
                                                Share</label>
                                                   <input type="number" class="form-control"
                                                   [ngClass]="clientAddForm.get('icShare')?.touched && clientAddForm.get('icShare')?.hasError('required') ? 'is-invalid' : ''"
                                                   formControlName="icShare" autocomplete="off" placeholder="International Casino Share " required />
  
                                            <div
                                                    *ngIf="clientAddForm.get('icShare')?.hasError('required') && (clientAddForm.get('icShare')?.touched || submitted) "
                                                    style="color:red">
                                                Casino share must be greater than or equal to 0.
                                            </div>
                                            <div
                                                    *ngIf="clientAddForm.get('icShare')?.hasError('max') && clientAddForm.get('icShare')?.touched"
                                                    style="color:red">
                                                Casino share must be less than or equal to {{agent?.icShare}}.
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-6">
                                        <label style="font-weight: bold;" class="form-label"> My International Casino
                                            Share</label>
                                        <input type="number" class="form-control" disabled autocomplete="off"
                                               [value]="agent?.icShare">
  
                                    </div>
                                </div> -->
                                <div class="row mb-3">
                                    <div class="col-12">
                                        <label style="font-weight: bold;" class="form-label">mobApp Charge</label>
                                        
                                               <input type="number" class="form-control"
                                                   [ngClass]="clientAddForm.get('mobAppCharge')?.touched && clientAddForm.get('mobAppCharge')?.hasError('required') ? 'is-invalid' : ''"
                                                   formControlName="mobAppCharge" autocomplete="off" placeholder="International Casino Share " required />
                                        <div
                                                *ngIf="clientAddForm.get('mobAppCharge')?.hasError('required') && (clientAddForm.get('mobAppCharge')?.touched||submitted)"
                                                style="color: red;">
                                            Mobile share must be greater than or equal to 0.
                                        </div>
                                        <div
                                                *ngIf="clientAddForm.get('mobAppCharge')?.hasError('max') && clientAddForm.get('mobAppCharge')?.touched"
                                                style="color: red;">
                                            Mobile App must be less than or equal to {{agent?.mobAppCharge}}.
                                        </div>
                                        <!-- <div *ngIf="serverErrors?.mobAppCharge && serverErrors != null" class="server-error" style="color: red;">
                                          {{ serverErrors?.mobAppCharge }}
                                        </div> -->
                                    </div>
                                    <!-- <div class="col-sm-6">
                                        <label style="font-weight: bold;" class="form-label">My Mobile App Charge</label>
                                        <input type="text" class="form-control" disabled autocomplete="off"
                                               [value]="agent?.mobAppCharge">
  
                                    </div> -->
                                </div>

                                <div class="row mb-3">
                                    <div class="col-sm-6">
                                        <label style="font-weight: bold;" class="form-label">Match Commission</label>
                                               <input type="number" class="form-control"
                                               [ngClass]="clientAddForm.get('mc')?.touched && clientAddForm.get('mc')?.hasError('required') ? 'is-invalid' : ''"
                                               formControlName="mc" autocomplete="off" placeholder="Match Commission" required />
  
                                        <div *ngIf="clientAddForm.get('mc')?.hasError('required') && (clientAddForm.get('mc')?.touched|| submitted)"
                                             style="color: red;">
                                            Match Commission must be greater than or equal to 0.
                                        </div>
                                        <div *ngIf="clientAddForm.get('mc')?.hasError('max') && clientAddForm.get('mc')?.touched"
                                             style="color: red;">
                                            Match Commission must be less than or equal to {{agent?.mc}}.
                                        </div>
                                    </div>
                                    <div class="col-sm-6">
                                        <label style="font-weight: bold;" class="form-label">My Match Commission</label>
                                        <input type="text" class="form-control" disabled autocomplete="off"
                                               [value]="agent?.mc">
  
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <div class="col-sm-6">
                                        <label style="font-weight: bold;" class="form-label">Session Commission</label>
                                      
                                               <input type="number" class="form-control"
                                               [ngClass]="clientAddForm.get('sc')?.touched && clientAddForm.get('sc')?.hasError('required') ? 'is-invalid' : ''"
                                               formControlName="sc" autocomplete="off" placeholder="Session Commission" required />
  
                                        <div *ngIf="clientAddForm.get('sc')?.hasError('required') && (clientAddForm.get('sc')?.touched ||submitted)"
                                             style="color: red;">
                                            Session Commission must be greater than or equal to 0.
                                        </div>
                                        <div *ngIf="clientAddForm.get('sc')?.hasError('max') && clientAddForm.get('sc')?.touched"
                                             style="color: red;">
                                            Session Commission must be less than or equal to {{agent?.sc}}.
                                        </div>
                                    </div>
                                    <div class="col-sm-6">
                                        <label style="font-weight: bold;" class="form-label">My Session
                                            Commission</label>
                                        <input type="text" class="form-control" disabled readonly [value]="agent?.sc">
  
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <div class="col-sm-6">
                                        <label style="font-weight: bold;" class="form-label">Casino Commission</label>
                                               <input type="number" class="form-control"
                                               [ngClass]="clientAddForm.get('cc')?.touched && clientAddForm.get('cc')?.hasError('required') ? 'is-invalid' : ''"
                                               formControlName="cc" autocomplete="off" placeholder="Casino Commission" required />
  
                                        <div *ngIf="clientAddForm.get('cc')?.hasError('required') && (clientAddForm.get('cc')?.touched ||submitted)"
                                             style="color: red;">
                                            Casino Commission must be greater than or equal to 0.
                                        </div>
                                        <div *ngIf="clientAddForm.get('cc')?.hasError('max') && clientAddForm.get('cc')?.touched" style="color: red;">
                                            Casino Commission must be less than or equal to {{agent?.cc}}.
                                        </div>
                                    </div>
  
                                    <div class="col-sm-6">
                                        <label style="font-weight: bold;" class="form-label">My Casino
                                            Commission</label>
                                        <input type="text" class="form-control" disabled autocomplete="off" readonly
                                               [value]="agent?.cc">
  
                                    </div>
  
                                </div>
  
                            </div>
  
                        </div>
                </div>
  
            </div>
            <div class="card-footer d-flex justify-content-between">
                <a routerLink="/client/client-details" class="btn btn-primary me-2">Cancel</a>
                <button type="submit" *ngIf="isLoading==false" class="btn btn-primary me-2">Create New Client</button>
                      <div class="spinner-border" role="status" *ngIf="isLoading==true">
                    <span class="visually-hidden">Loading...</span>
                  </div>
            </div>
          </form>
        </div>
  </div>
  
  